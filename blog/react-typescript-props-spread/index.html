<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.111.3">
	
	<link rel="icon" href="/images/logo.svg">
	
	<title>Spreading props correctly with React &#43; TypeScript | Morten Barklund</title>
	<meta name="description" content="In this blog post, we&rsquo;re going to explore how to create a React component that can be passed any number of properties which will be passed through to some other component.">
	<meta name="keywords" content="react, typescript,react, react hooks, react context, design patterns, react concurrent">

	<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://mortenbarklund.com/blog/react-typescript-props-spread/twitter_feature.png"/>
<meta name="twitter:title" content="Spreading props correctly with React &#43; TypeScript"/>
<meta name="twitter:description" content="In this blog post, we&rsquo;re going to explore how to create a React component that can be passed any number of properties which will be passed through to some other component."/>

	<meta property="og:title" content="Spreading props correctly with React &#43; TypeScript" />
<meta property="og:description" content="In this blog post, we&rsquo;re going to explore how to create a React component that can be passed any number of properties which will be passed through to some other component." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mortenbarklund.com/blog/react-typescript-props-spread/" /><meta property="og:image" content="https://mortenbarklund.com/blog/react-typescript-props-spread/twitter_feature.png"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2023-01-04T21:00:00+01:00" />
<meta property="article:modified_time" content="2023-01-04T21:00:00+01:00" />


	<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">

	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
	 crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">
	<link href="/css/medium.css" rel="stylesheet">
  <link href="/css/additional.css" rel="stylesheet">
  <link href="/css/syntax.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="https://mortenbarklund.com//">

            
            <img src="/images/logo.svg" alt="Blog logo that happens to look a bit like the React logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/blog">Blog</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="https://barklund.dev/rq2e">Book</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/newsletter">Subscribe</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/license">License</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="mainheading">
    <h1 class="sitetitle">Morten Barklund</h1>
    <p class="lead">
         Handy tips for writing better React.
    </p>
</div><div class="main-content">
        
        <div class="container">
            <div class="row">
                
                <div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset">
    <p>Share:</p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=Spreading%20props%20correctly%20with%20React%20%2b%20TypeScript&url=https%3a%2f%2fmortenbarklund.com%2fblog%2freact-typescript-props-spread%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;">
                <i class="fab fa-twitter" aria-hidden="true" title="Share on Twitter"></i>
                <span class="sr-only">Share on Twitter</span>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=https%3a%2f%2fmortenbarklund.com%2fblog%2freact-typescript-props-spread%2f" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-facebook-f" aria-hidden="true" title="Share on Facebook"></i>
                <span class="sr-only">Share on Facebook</span>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmortenbarklund.com%2fblog%2freact-typescript-props-spread%2f&title=Spreading%20props%20correctly%20with%20React%20%2b%20TypeScript&summary=In%20this%20blog%20post%2c%20we%26rsquo%3bre%20going%20to%20explore%20how%20to%20create%20a%20React%20component%20that%20can%20be%20passed%20any%20number%20of%20properties%20which%20will%20be%20passed%20through%20to%20some%20other%20component.&source=LinkedIn" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-linkedin" aria-hidden="true" title="Share on LinkedIn"></i>
                <span class="sr-only">Share on LinkedIn</span>
            </a>
        </li>


        
    </ul>

    
</div>
</div>
                                
                <div class="col-md-9 flex-first flex-md-unordered">
                    <div class="mainheading">
                        	
                        
                        
                        
                        <div class="row post-top-meta">
                            <div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right">
                                <picture>
                                    <source srcset="/images/author.jpg.webp" />
                                    <img class="author-thumb" src="/images/author.jpg" alt="Morten Barklund" />
                                </picture>
                            </div>
                            <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left">
                                <a target="_blank" class="link-dark">Morten Barklund</a><br>
                                <span class="author-description">
                                    Lead Frontend Developer, React expert, accessibility advocate, ultrarunner, and board game enthusiast. Also, I simply ❤️  corgis!<br>
                                    <i class="far fa-star"></i>
                                    Jan 4, 2023
                                    <i class="far fa-clock clock"></i>
                                    8 min read
                                </span>					
                            </div>
                        </div>			
                        	
                        
                                                
                        
                        <h1 class="posttitle">Spreading props correctly with React &#43; TypeScript</h1> 
                    </div>

                    
                    
                    
                    
                    
                    <figure class="featured-figure">
                        <picture>
                            <source srcset="https://mortenbarklund.com/blog/react-typescript-props-spread/cover.jpg.webp" />
                            <img class="featured-image img-fluid" src="https://mortenbarklund.com/blog/react-typescript-props-spread/cover.jpg" alt="Jam on toast" />
                        </picture>
                        
                        <figcaption class="featured-caption">Spreading props is like spreading jam - if you do it wrong, you get sticky fingers!</figcaption>
                        
                    </figure>
                    
                    

                    
                    <div class="article-post">
                        <p>In this blog post, we&rsquo;re going to explore how to create a React component that can be passed any number of properties which will be passed through to some other component. This seems like a really narrow use-case, but it is very common especially when you&rsquo;re creating UI libraries or similar generic components.</p>
<blockquote>
<p>This article is part of my <a href="https://mortenbarklund.com/blog/advanced-react-typescript/" title="Advanced React and TypeScript series">&ldquo;Advanced React and TypeScript series&rdquo;</a> - go check out the other articles in the series too!</p>
</blockquote>
<p>We will in particular be discussing how to do this in TypeScript and how to correctly type the properties of the component to allow the correct set of properties to be passed in. There actually happens to be 6 different ways to do this in TypeScript and React, so which should you use? And which should you definitely not use?</p>
<p>We&rsquo;ll be going over these steps:</p>
<ol>
<li>How and why we spread props in React</li>
<li>The problems that TypeScript introduce</li>
<li>The different possible solutions in TypeScript with pros and cons</li>
<li>Key takeaways</li>
</ol>
<hr>
<h2 id="1how-and-why-we-spread-props-in-react">1.  How and why we spread props in React</h2>
<p>Imagine that you&rsquo;re tasked with creating a generic <em>input-and-label</em> component in React named <code>&lt;InputGroup /&gt;</code>. You want the component to accept a label property with the label text, but besides that, the component will pass any other property passed to it straight on the the <code>&lt;input /&gt;</code> element. This will allow people to use it as a text input with a placeholder with <code>&lt;InputGroup label=&quot;name&quot; placeholder=&quot;E.g. John Doe&quot; /&gt;</code> but also as a required password input with <code>&lt;InputGroup label=&quot;password&quot; type=&quot;password&quot; required /&gt;</code>.</p>
<p>How would you create this component? The naive way is of course to list every possible property of the input and passing it on, but that quickly becomes unreasonable:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">InputGroup</span><span class="p">({</span> <span class="nx">label</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">required</span><span class="p">,</span> <span class="nx">placeholder</span><span class="p">,</span> <span class="nx">id</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">label</span><span class="p">}</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="p">{</span><span class="nx">type</span><span class="p">}</span> <span class="na">required</span><span class="o">=</span><span class="p">{</span><span class="nx">required</span><span class="p">}</span> <span class="na">placeholder</span><span class="o">=</span><span class="p">{</span><span class="nx">placeholder</span><span class="p">}</span> <span class="na">id</span><span class="o">=</span><span class="p">{</span><span class="nx">id</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Here we&rsquo;ve added just 4 of the attributes that we would need to pass on. And with a total of no less than 250-ish(!) attributes, that&rsquo;s a terrible approach. Instead, we use the spreading operator to just allow any other property to be passed along:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">InputGroup</span><span class="p">({</span> <span class="nx">label</span><span class="p">,</span> <span class="p">...</span><span class="nx">rest</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">label</span><span class="p">}</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">input</span> <span class="p">{</span><span class="na">...rest</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>This is a lot smarter!</p>
<p>We can now pass any valid property to the input component, but actually we can also pass any invalid property to it. We can do anything here! So while there&rsquo;s nothing stopping us from doing <code>&lt;InputGroup label=&quot;message&quot; rows=&quot;5&quot; /&gt;</code> thinking it&rsquo;s a text area (it&rsquo;s not, inputs cannot have multiple rows), it&rsquo;s allowed and the rows property is added to the input for no purpose.</p>
<hr>
<h2 id="2the-problems-that-react-in-typescript-introduce">2.  The problems that React in TypeScript introduce</h2>
<p>When we add TypeScript to the mix, we specify the type of the properties object, so TypeScript can validate, that we only ever pass valid properties to our component.</p>
<p>So for our naive approach before, this would work:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">InputGroupProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">type</span><span class="o">?:</span> <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">required?</span>: <span class="kt">boolean</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">placeholder?</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">id?</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">InputGroup</span><span class="p">({</span> <span class="nx">label</span><span class="p">,</span> <span class="kr">type</span><span class="p">,</span> <span class="nx">required</span><span class="p">,</span> <span class="nx">placeholder</span><span class="p">,</span> <span class="nx">id</span> <span class="p">}</span><span class="o">:</span> <span class="nx">InputGroupProps</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">label</span><span class="p">}</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="p">{</span><span class="kr">type</span><span class="p">}</span> <span class="na">required</span><span class="o">=</span><span class="p">{</span><span class="nx">required</span><span class="p">}</span> <span class="na">placeholder</span><span class="o">=</span><span class="p">{</span><span class="nx">placeholder</span><span class="p">}</span> <span class="na">id</span><span class="o">=</span><span class="p">{</span><span class="nx">id</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>But this is not a good approach for several reasons. First of all, our types above aren&rsquo;t as precise as the built-in ones. For example, the type property should not just be any string, but only one of a few select strings, that are actually valid input types.</p>
<p>But more importantly, we don&rsquo;t want to enumerate all the properties in neither the component definition, nor the type definition. So we want to only specify the label property in our type, but somehow have the type also include all the normal properties used by an intrinsic input element.</p>
<p>What we want is something like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">InputGroupProps</span> <span class="kr">extends</span> <span class="nx">AllPossiblePropsForAnInput</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">InputGroup</span><span class="p">({</span> <span class="nx">label</span><span class="p">,</span> <span class="p">...</span><span class="nx">rest</span> <span class="p">}</span><span class="o">:</span> <span class="nx">InputGroupProps</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">label</span><span class="p">}</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">input</span> <span class="p">{</span><span class="na">...rest</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Unfortunately, <code>AllPossiblePropsForAnInput</code> doesn&rsquo;t exist because we just made it up. But there are other interfaces!</p>
<hr>
<h2 id="3six-different-solutions-with-pros-and-cons">3.  Six different solutions with pros and cons</h2>
<p>Here are six other interfaces, that we can actually extend from – starting with the best one:</p>
<h4 id="a-componentpropswithoutref">a. <code>ComponentPropsWithoutRef</code></h4>
<p>React has a built-in type to extract the type of props for a given component (type) excluding any potential ref that the component accepts. It is called <code>ComponentPropsWithoutRef</code> and exists on the <code>React</code> namespace.</p>
<p>You would normally use it to extract the type of props from some other component, but you can use that same interface to extract the props of the intrinsic HTML types by passing in the string identifier of the HTML element:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">InputGroupProps</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">ComponentPropsWithoutRef</span><span class="o">&lt;</span><span class="s2">&#34;input&#34;</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>It is a bit verbose, but you can of course import it from React which makes it slightly shorter:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">ComponentPropsWithoutRef</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">InputGroupProps</span> <span class="kr">extends</span> <span class="nx">ComponentPropsWithoutRef</span><span class="o">&lt;</span><span class="s2">&#34;input&#34;</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>However, there are no other downsides. This interface is pretty straight-forward to use and very easy to change to a different element, e.g. a <code>&lt;span /&gt;</code> or a <code>&lt;textarea /&gt;</code>. And it allows all the relevant properties with the narrowest possible attributes.</p>
<h4 id="b-componentprops">b. <code>ComponentProps</code></h4>
<p>Similarly to <code>ComponentPropsWithoutRef</code>, there&rsquo;s also the <code>ComponentProps</code> type. It works in the same way, except it also includes the <code>ref</code> property, which you would never be able to accept as a props parameter. So using <code>ComponentProps</code> would allow you to write this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">ComponentProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">InputGroupProps</span> <span class="kr">extends</span> <span class="nx">ComponentProps</span><span class="o">&lt;</span><span class="s2">&#34;input&#34;</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">InputGroup</span><span class="p">({</span> <span class="nx">label</span><span class="p">,</span> <span class="nx">ref</span><span class="p">,</span> <span class="p">...</span><span class="nx">rest</span> <span class="p">}</span><span class="o">:</span> <span class="nx">InputGroupProps</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">label</span><span class="p">}</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">ref</span><span class="p">}</span> <span class="p">{</span><span class="na">...rest</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>This would seem to be valid - at least in TypeScript&rsquo;s eyes - but you would never actually be able to accept a ref like that. You would have to use <code>forwardRef</code> to do that.</p>
<h4 id="c-inputhtmlattributes">c. <code>InputHTMLAttributes</code></h4>
<p>React has another interface, or actually a whole set of interfaces, that you can use. However, they are generic and the generic type indicates the types for the event properties (such as the type of the <code>onClick</code> event handler).</p>
<p>If we were to use this interface, we would have to type:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">InputHTMLAttributes</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">InputGroupProps</span> <span class="kr">extends</span> <span class="nx">InputHTMLAttributes</span><span class="p">&lt;</span><span class="nt">HTMLInputElement</span><span class="p">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">...</span>
</span></span></code></pre></div><p>But what if we had a text area element instead? Well, then the interface to extend is <code>TextAreaHTMLAttributes&lt;HTMLTextAreaElement&gt;</code>. Notice how we need to put the name of the HTML element in two different places and the order of the prefixes aren&rsquo;t event identical with one being <code>ElementHTML*</code> and the other <code>HTMLElement*</code>.</p>
<p>This approach works though and is a perfectly fine solution. But it is quite verbose and requires you to remember a ton of interface names so it&rsquo;s a bit shaky.</p>
<h4 id="d-jsxintrinsicelements">d. <code>JSX.IntrinsicElements</code></h4>
<p>All the intrinsic JSX elements are actually defined in a global namespace, named <code>JSX</code>. From here, we can extract the type for any by indexing the <code>JSX.IntrinsicElements</code> with the HTML node name, e.g. <code>JSX.IntrinsicElements['input']</code>.</p>
<p>But due to a quirk of how TypeScript syntax works, we can&rsquo;t actually extend this. You can&rsquo;t use square brackets with the <code>extends</code> keyword for some reason. So we cannot do <code>interface InputGroupProps extends JSX.IntrinsicElements['input']</code>. We would have to save it to a temporary type, which we would then use like so:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">type</span> <span class="nx">InputProps</span> <span class="o">=</span> <span class="nx">JSX</span><span class="p">.</span><span class="nx">IntrinsicElements</span><span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">InputGroupProps</span> <span class="kr">extends</span> <span class="nx">InputProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Furthermore, this also allows the ref property, as with the <code>ComponentProps</code> option. So this is not a great option because it allows an invalid prop and it requires an extra type.</p>
<h4 id="e-htmlattributes">e. <code>HTMLAttributes</code></h4>
<p>Rather than using the element-specific interfaces such as <code>InputHTMLAttributes</code> can we instead use the general <code>React.HTMLAttributes</code> interface.</p>
<p>But this has two problems. First, it still requires a generic, which is the HTML element interface such as <code>HTMLAttributes&lt;HTMLInputElement&gt;</code>. But secondly, and a lot more important, this interface only includes HTML attributes that are applicable to all elements such as <code>className</code>, <code>id</code>, <code>style</code>, etc and not the element-specific ones such as <code>type</code> in case of the input element. Remember, the HTML element passed as a generic parameter only defines the types for event handlers, it does not describe any properties directly.</p>
<p>So that&rsquo;s a complete no-go!</p>
<h4 id="f-htmlprops">f. <code>HTMLProps</code></h4>
<p>Finally, there&rsquo;s the all-encompassing interface <code>React.HTMLProps</code>. It still requires the HTML element interface as a generic argument (<code>HTMLProps&lt;HTMLInputElement&gt;</code>), but even worse, this interface allows <strong>all</strong> properties, that are allowed on any single element in HTML. So you can put an <code>open</code> property on your input, because <code>open</code> is a valid  property on the <code>&lt;details /&gt;</code> element – and a 100 other properties, that aren&rsquo;t actually applicable to input elements.</p>
<p>And we can&rsquo;t actually use it, because when we try to spread the rest argument to the <code>&lt;input /&gt;</code>, TypeScript will complain and point out, that it could contain invalid properties not allowed on an input. So this is the worst option by far.</p>
<hr>
<h2 id="4key-takeaways-and-final-solution">4.  Key takeaways and final solution</h2>
<p>TypeScript is a tremendously useful tool in React, and once you&rsquo;ve started using it, you probably won&rsquo;t look back. But some component patterns, that are simple and everyday in pure JavaScript become a lot more complex in TypeScript, but they do also come with complete type safety, so that&rsquo;s a huge bonus.</p>
<p>In this post, we&rsquo;ve discussed how to correctly accept spreadable props in a React component using TypeScript. While there are many ways, extending your props from the <code>ComponentPropsWithoutRef&lt;&quot;component&quot;&gt;</code> is the simplest, safest, and easiest solution, but there are other solutions just as safe, just a bit more verbose and requiring remembering the names of a lot more interfaces.</p>
<table>
<thead>
<tr>
<th>Interface</th>
<th>Easy to<br>write</th>
<th>Excludes<br><code>ref</code></th>
<th>Includes<br>specific<br>properties</th>
<th>Excludes<br>invalid<br>properties</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ComponentPropsWithoutRef&lt;&quot;*&quot;&gt;</code></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>ComponentProps&lt;&quot;*&quot;&gt;</code></td>
<td>✅</td>
<td>🚫</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>*HTMLAttributes&lt;HTML*Element&gt;</code></td>
<td>🤔</td>
<td>🚫</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>JSX.IntrinsicElements[&quot;*&quot;]</code></td>
<td>🤬</td>
<td>🚫</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>HTMLAttributes&lt;HTML*Element&gt;</code></td>
<td>✅</td>
<td>🚫</td>
<td>🚫</td>
<td>✅</td>
</tr>
<tr>
<td><code>HTMLProps&lt;HTML*Element&gt;</code></td>
<td>✅</td>
<td>🚫</td>
<td>✅</td>
<td>🤯</td>
</tr>
</tbody>
</table>
<p>Using this technique, here&rsquo;s how we would implement an <code>&lt;InputGroup /&gt;</code> component in React and TypeScript with spreadable props served by CodeSandbox:</p>
<iframe
    src="https://codesandbox.io/embed/react-typescript-and-props-spreading-lypxqb?fontsize=12&codemirror=1&hidenavigation=1&theme=dark&module=%252Fsrc%252FApp.tsx&highlights=3%2c4%2c5%2c7&view=editor"
    style="width:100%; height:700px; border:0; border-radius: 4px; overflow:hidden;"
    title="React TypeScript and props spreading"
></iframe>
<p>And this is the resulting application - looks great, no?</p>
<iframe
    src="https://codesandbox.io/embed/react-typescript-and-props-spreading-lypxqb?fontsize=12&codemirror=1&hidenavigation=1&theme=dark&module=&highlights=&view=preview"
    style="width:100%; height:600px; border:0; border-radius: 4px; overflow:hidden;"
    title="React TypeScript and props spreading"
></iframe>
<p>You can <a href="https://codesandbox.io/s/react-typescript-and-props-spreading-lypxqb">play around with the sandbox for yourself</a>.</p>

                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        <a href="/tags/react">react</a>
                        </li>
                        
                        <li>
                        <a href="/tags/typescript">typescript</a>
                        </li>
                        
                        </ul>
                    </div>
                    

                    
                    
                    
                    <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
                    
                        <a class="d-block col-md-6" href="https://mortenbarklund.com/blog/advanced-react-typescript/"> &laquo; A Comprehensive Guide to Advanced React and TypeScript</a>
                    
                    
                        <a class="d-block col-md-6 text-lg-right" href="https://mortenbarklund.com/blog/react-18-concurrent-mode-how-transitions-work/">React 18 Concurrent Mode: How transitions really work (feat. Wordle) &raquo;</a>
                    
                    <div class="clearfix"></div>
                    </div>
                    
                </div>
                
            </div>
        </div>

        
        
    </div>

<section class="overlay-popup">
  <div class="overlay">
    <button class="overlay-close">x</button>
    <img src="/images/book.png" width="300" />
    <div>
      <h3>The Ultimate Guide to React in 2022</h3>
      <p>Learn how to master React in this 600+ page book by Morten Barklund.</p>
      <p>Use code <code>au35mbam</code> at checkout for 35% off!</p>
      <a class="overlay-cta" href="//reactquickly.dev">Get React Quickly</a>
    </div>
  </div>
</section>
<script>
const lastPopup = localStorage.getItem('last-popup') || 0;
const numDaysSince = (new Date().getTime() - lastPopup) / 1000 / 60 / 60 / 24;
if (numDaysSince >= 1) { 
  localStorage.setItem('last-popup', new Date().getTime());
  const getToggle = flag => () => {
    document.querySelector(".overlay-popup").classList.toggle("visible", flag);
    if (flag) {
      document.addEventListener("keydown", closeIfEscape);
    } else {
      document.removeEventListener("keydown", closeIfEscape);
    }
  }
  const closeIfEscape = ({ key }) => (key === 'Escape') && getToggle(false)();
  setTimeout(getToggle(true), 100_000);
  document.querySelector(".overlay-close").addEventListener("click", getToggle(false));
}
</script>
<style>
.overlay-popup {
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  z-index: 1;
  background: rgba(33, 33, 33, 0.8);
  transform: translateY(60%) scale(0);
}

.overlay-popup.visible {
  transform: translateY(0) scale(1);
  transition: transform 0.2s cubic-bezier(0.4, 0.0, 0.2, 1);
}
.overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #eee;
  padding: 2em;
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 80vw;
}
.overlay img {
  max-width: 50vw;
}
@media (min-width: 720px) {
  .overlay {
    flex-direction: row;
    width: initial;
  }
}
.overlay-close {
  position: absolute;
  top: -15px;
  right: -15px;
  width: 30px;
  height: 30px;
  line-height: 28px;
  padding: 0;
  font-size: 20px;
  background-color: #eee;
  box-shadow: 0 0 4px rgba(0 0 0 / 0.5);
  display: block;
  border-radius: 15px;
  text-align: center;
  cursor: pointer;
  border: 0;
}
.overlay-cta {
  display: inline-block;
  background-color: #FC4A8B;
  color: white;
  padding: 1em;
  margin: 1em 0;
}
.overlay-cta:hover {
  color: white;
}
</style>
            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                <a href="/license">Licensed under CC BY-SA 4.0</a>
            </div>
        </div>
    </div>
</footer>


<script>var clicky_site_ids = clicky_site_ids || []; clicky_site_ids.push(101253872);</script>
<script async src="//static.getclicky.com/js"></script>
        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<script src="/js/mediumish.js"></script>

    </body>
</html>
